{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport Cookies from \"js-cookie\";\nimport router from \"@/router\";\nconst request = axios.create({\n  baseURL: 'http://localhost:8003',\n  timeout: 5000\n});\nrequest.interceptors.request.use(config => {\n  config.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n  config.headers['Authorization'] = Cookies.get('admin') ? `Bearer  ${JSON.parse(Cookies.get('admin')).access_token}` : null;\n\n  //const admin = Cookies.get('admin');\n  //if(!admin) {\n  //    router.push('/login')\n  //}\n\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nrequest.interceptors.response.use(response => {\n  let res = response.data;\n  if (typeof res === 'string') {\n    res = res ? JSON.parse(res) : res;\n  }\n  return res;\n}, error => {\n  if (`${error}`.includes('401')) {\n    console.log('err ' + error); // for debug\n    Cookies.remove('admin');\n    router.push('/login');\n  }\n  return Promise.reject(error);\n});\nexport default request;","map":{"version":3,"names":["axios","Cookies","router","request","create","baseURL","timeout","interceptors","use","config","headers","get","JSON","parse","access_token","error","Promise","reject","response","res","data","includes","console","log","remove","push"],"sources":["/Users/muhammadfaizal/aplikasi-perpustakaan/front-end-perpustakaan/src/utils/request.js"],"sourcesContent":["import axios from 'axios';\r\nimport Cookies from \"js-cookie\";\r\nimport router from \"@/router\";\r\n\r\nconst request = axios.create({\r\n    baseURL: 'http://localhost:8003',\r\n    timeout: 5000\r\n})\r\n\r\nrequest.interceptors.request.use(config => {\r\n\r\n    config.headers['Content-Type'] = 'application/x-www-form-urlencoded';\r\n    config.headers['Authorization'] = Cookies.get('admin')? `Bearer  ${JSON.parse(Cookies.get('admin')).access_token}` : null;\r\n\r\n    //const admin = Cookies.get('admin');\r\n    //if(!admin) {\r\n    //    router.push('/login')\r\n    //}\r\n\r\n    return config\r\n}, error => {\r\n    return Promise.reject(error)\r\n});\r\n\r\nrequest.interceptors.response.use(\r\n    response => {\r\n        let res = response.data;\r\n        if (typeof res === 'string') {\r\n            res = res ? JSON.parse(res) : res\r\n        }\r\n        return res;\r\n    },\r\n    error => {\r\n        if (`${error}`.includes('401')) {\r\n            console.log('err ' + error) // for debug\r\n            Cookies.remove('admin');\r\n            router.push('/login');\r\n        }\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\n\r\nexport default request"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,MAAM,MAAM,UAAU;AAE7B,MAAMC,OAAO,GAAGH,KAAK,CAACI,MAAM,CAAC;EACzBC,OAAO,EAAE,uBAAuB;EAChCC,OAAO,EAAE;AACb,CAAC,CAAC;AAEFH,OAAO,CAACI,YAAY,CAACJ,OAAO,CAACK,GAAG,CAACC,MAAM,IAAI;EAEvCA,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,GAAG,mCAAmC;EACpED,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,GAAGT,OAAO,CAACU,GAAG,CAAC,OAAO,CAAC,GAAG,WAAUC,IAAI,CAACC,KAAK,CAACZ,OAAO,CAACU,GAAG,CAAC,OAAO,CAAC,CAAC,CAACG,YAAa,EAAC,GAAG,IAAI;;EAEzH;EACA;EACA;EACA;;EAEA,OAAOL,MAAM;AACjB,CAAC,EAAEM,KAAK,IAAI;EACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC;AAEFZ,OAAO,CAACI,YAAY,CAACW,QAAQ,CAACV,GAAG,CAC7BU,QAAQ,IAAI;EACR,IAAIC,GAAG,GAAGD,QAAQ,CAACE,IAAI;EACvB,IAAI,OAAOD,GAAG,KAAK,QAAQ,EAAE;IACzBA,GAAG,GAAGA,GAAG,GAAGP,IAAI,CAACC,KAAK,CAACM,GAAG,CAAC,GAAGA,GAAG;EACrC;EACA,OAAOA,GAAG;AACd,CAAC,EACDJ,KAAK,IAAI;EACL,IAAK,GAAEA,KAAM,EAAC,CAACM,QAAQ,CAAC,KAAK,CAAC,EAAE;IAC5BC,OAAO,CAACC,GAAG,CAAC,MAAM,GAAGR,KAAK,CAAC,EAAC;IAC5Bd,OAAO,CAACuB,MAAM,CAAC,OAAO,CAAC;IACvBtB,MAAM,CAACuB,IAAI,CAAC,QAAQ,CAAC;EACzB;EACA,OAAOT,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CACJ;AAGD,eAAeZ,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}